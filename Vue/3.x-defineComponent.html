<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="IE=edge" http-equiv="X-UA-Compatible" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>3.x-defineComponent</title>
  <script src="https://unpkg.com/vue@next"></script>
</head>

<body>
  <div id="app1">
    {{name}} {{count}}
    <p><button v-on:click="increment">Count++</button> <button v-on:click="decrement">Count--</button></p>
  </div>
  <hr />
  <div id="app2">{{name}}</div>
</body>
<script type="text/javascript">
  var app1 = app2 = null;
</script>
<script type="module">
  document.onreadystatechange = function () {
    const { createApp, ref, toRefs, defineComponent, onBeforeMount, onMounted } = Vue;

    // 定义组件
    var CountComponent = defineComponent({
      setup(props, ctx) {
        onBeforeMount(() => {
          console.log('defineComponent onBeforeMount...');
        })
        onMounted(() => {
          console.log('defineComponent onMounted...');
        });
        const count = ref(0);
        const name = ref('Hello world');
        const increment = () => {
          count.value++;
        }
        const decrement = () => {
          count.value--;
        }
        return { count, name, increment, decrement }
      }
    })
    app1 = createApp(CountComponent).mount('#app1');
    /****************************************************************/
    var HelloWorld = defineComponent(function HelloWorld() {
      onBeforeMount(() => {
        console.log('defineComponent HelloWorld onBeforeMount...');
      });
      onMounted(() => {
        console.log('defineComponent HelloWorld onMounted...');
      });
      const name = ref('Hello defineComponent');
      return { name }
    });
    const app2 = createApp(HelloWorld).mount('#app2');
    /****************************************************************/
  }
</script>

</html>